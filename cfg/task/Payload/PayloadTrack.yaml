name: PayloadTrack

defaults:
  # see https://hydra.cc/docs/advanced/overriding_packages/
  - /base/sim_base@_here_
  # - /base/randomization_base@_here_

num_envs: 4096
max_episode_length: 600
env_spacing: 2.5

observations: # computed in this order
  - key: [agents, observation]
    items:
      DynamicState: {asset_name: drone}
      BodyDynamicState: {asset_name: drone, body_name: payload}
      Waypoints: {}
      RotorParam: {asset_name: drone, actuator_name: rotor}
      BodyMass: {asset_name: drone, body_name: ["base_link", "payload"]}
      DragCoef: {asset_name: drone, body_name: ["base_link", "payload"]}
  - key: [agents, priv]
    items:
      AppliedActuation: {asset_name: drone, actuator_name: rotor}
  - key: [agents, param]
    items:
      RotorParam: {asset_name: drone, actuator_name: rotor}
      BodyMass: {asset_name: drone, body_name: ["base_link", "payload"]}
      DragCoef: {asset_name: drone, body_name: ["base_link", "payload"]}

actions:
  - key: [agents, action]
    items:
      RotorCommand: {asset_name: drone, actuator_name: rotor}

rewards:
  PosTrackingErrorExp: {weight: 1.0, scale: 1.6}
  # YawTrackingDot: {weight: 0.25}
  SpinPenaltyRational: {weight: 0.1}

termination:
  PositionOutOfRange: {z_range: [0.1, 4.0]}
  TrackingErrorExceeds: {thres: 0.8}

randomizations:
  RandomizeRotorParams:
    asset_name: drone
    actuator_name: rotor
    kf_range: [0.8, 2.0]
    km_range: [0.8, 2.0]
    tau_range: [0.2, 1.0]
  RandomizeBodyMass:
    asset_name: drone
    mass_range: 
      base_link: [0.5, 0.9]
      payload: [0.05, 0.35]
  RandomizeDragCoef:
    asset_name: drone
    drag_coef_range:
      base_link: [0.0, 0.5]
      payload: [0.0, 0.2]

drone_model: Hummingbird
future_traj_steps: 6
action_transform: null
